function toQiniuQueryFormat(a){var b=/\.([^.!]+)!([0-9]{1,4})x([0-9]{1,4})(\+2x)?\..+/,c=a,d=1,e=c.match(b);return e&&4<=e.length&&('+2x'==e[4]&&(d=2),c=c.replace(b,'.')+e[1]+'?imageView2/2/w/'+parseInt(e[2],10)*d+'/h/'+parseInt(e[3],10)*d+'/q/90/format/'+('webp'===e[1]?'jpg':e[1])),c}function cdnImage(a,b){if(!a)return'https://b.yzcdn.cn/v2/image/wap/no_pic.png';if(a.match(/^data:/i))return a;b=b||'';var c=[/^(https?:)?\/\/imgqn.koudaitong.com/,/^(https?:)?\/\/kdt-img.koudaitong.com/,/^(https?:)?\/\/img.yzcdn.cn/,/^(https?:)?\/\/dn-kdt-img.qbox.me/];b=b||'';var d='https://img.yzcdn.cn';for(var e=0;e<c.length;e++)a=a.replace(c[e],d);if(!a.match(/^(https?:)?\/\//i))a=d+'/'+a+b;else if(a.match(d))b&&a.match('!')&&(a=a.split('!')[0]),a+=b;else return a;return toQiniuQueryFormat(a)}module.exports=cdnImage;