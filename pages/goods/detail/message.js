var cdnImage=require('../../../utils/cdnImage'),upload=require('../../../utils/upload');module.exports={handleMessageValueChange(a){var b=a.currentTarget.dataset,c=b.index,d=a.detail.value,f=this.data.messages;f[c].value=d,this.setData({messages:f})},handleMessageUploadImageTap(a){var b=a.currentTarget.dataset.index;wx.chooseImage({count:1,sizeType:['compressed'],sourceType:['album','camera'],success:c=>{this.setData({[`messages[${b}].uploading`]:!0}),upload({file:c.tempFilePaths[0],success:d=>{var f=d.attachment_url;this.setData({[`messages[${b}].value`]:cdnImage(f),[`messages[${b}].formatedValue`]:cdnImage(f,'!120x120.jpg'),[`messages[${b}].uploading`]:!1})},fail:d=>{this.showToast(d.msg),this.setData({[`messages[${b}].uploading`]:!1})}})},fail:()=>{this.showToast('\u9009\u62E9\u56FE\u7247\u5931\u8D25')}})}};